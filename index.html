<!DOCTYPE html>
<html>
<head>
    <title>Free Text Converter</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        .converter { border: 2px dashed #ccc; padding: 20px; margin: 20px 0; text-align: center; }
        button { background: #4CAF50; color: white; border: none; padding: 10px 20px; margin-top: 10px; cursor: pointer; }
        #audioResult, #pdfResult { margin-top: 15px; padding: 10px; border: 1px solid #eee; min-height: 50px; }
        .donate { background: #ffe; border: 2px solid #ffe082; color: #333; }
    </style>
</head>
<body>
    <h1>Free Text Converter</h1>
    
    <div class="converter">
        <h3>ðŸŽ¤ Audio to Text</h3>
        <input type="file" id="audioFile" accept="audio/*">
        <button onclick="convertAudio()">Convert</button>
        <div id="audioResult"></div>
    </div>

    <div class="converter">
        <h3>ðŸ“„ PDF to Text</h3>
        <input type="file" id="pdfFile" accept=".pdf">
        <button onclick="convertPDF()">Convert</button>
        <div id="pdfResult"></div>
    </div>

    <div class="converter donate">
        <h3>ðŸ’¸ Support / Donate</h3>
        <p>
          You can support this project by sending your donation via Easypaisa.<br>
          <strong>Easypaisa Number:</strong> <span style="color:green;font-size:1.2em;">03XXXXXXXXX</span><br>
          After sending, please email your receipt to <strong>your@email.com</strong> for confirmation.
        </p>
    </div>

    <!-- WORKING CONVERSION SCRIPTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script>
        // Audio-to-Text (Works in Chrome/Edge)
        function convertAudio() {
            const file = document.getElementById('audioFile').files[0];
            if (!file) return alert("Please select an audio file first!");
            
            const audioResult = document.getElementById('audioResult');
            audioResult.innerHTML = "Listening... (Speak clearly after clicking 'Allow')";
            
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'en-US';
            
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                audioResult.innerHTML = `<strong>Result:</strong> ${transcript}`;
            };
            
            recognition.start();
        }

        // PDF-to-Text (Works with most PDFs)
        async function convertPDF() {
            const file = document.getElementById('pdfFile').files[0];
            if (!file) return alert("Please select a PDF first!");
            
            const pdfResult = document.getElementById('pdfResult');
            pdfResult.innerHTML = "Processing PDF...";
            
            const pdf = await pdfjsLib.getDocument(URL.createObjectURL(file)).promise;
            let fullText = "";
            
            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const textContent = await page.getTextContent();
                fullText += textContent.items.map(item => item.str).join(' ');
            }
            
            pdfResult.innerHTML = `<strong>Extracted Text:</strong><br>${fullText.slice(0, 1000)}${fullText.length > 1000 ? '...' : ''}`;
        }
    </script>
</body>
</html>
